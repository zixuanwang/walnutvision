CREATE TABLE brand (id BIGINT AUTO_INCREMENT, country TEXT, description LONGTEXT NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE category (id BIGINT AUTO_INCREMENT, level BIGINT NOT NULL, description TEXT NOT NULL, INDEX level_index_idx (level), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE category_tree (id BIGINT AUTO_INCREMENT, category_id BIGINT NOT NULL, subcategory_id BIGINT NOT NULL, INDEX category_id_idx (category_id), INDEX subcategory_id_idx (subcategory_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE color (id BIGINT AUTO_INCREMENT, colorname TEXT NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE comment (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, product_id BIGINT NOT NULL, rating BIGINT, love BIGINT, content LONGTEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), INDEX product_id_idx (product_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE friend_similarity (id1 BIGINT, id2 BIGINT, similarity FLOAT(18, 2), PRIMARY KEY(id1, id2)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE friendship (id1 BIGINT, id2 BIGINT, hop BIGINT NOT NULL, PRIMARY KEY(id1, id2)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE image (id BIGINT AUTO_INCREMENT, product_id BIGINT NOT NULL, url TEXT NOT NULL, description LONGTEXT, INDEX product_id_idx (product_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE material (id BIGINT AUTO_INCREMENT, materialname TEXT NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE price (id BIGINT AUTO_INCREMENT, product_id BIGINT NOT NULL, store_id BIGINT NOT NULL, price FLOAT(18, 2), INDEX price_index_idx (price), INDEX product_id_idx (product_id), INDEX store_id_idx (store_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product (id BIGINT AUTO_INCREMENT, name TEXT NOT NULL, brand_id BIGINT, size TEXT, barcode TEXT, qrcode TEXT, description LONGTEXT, overallrating FLOAT(18, 2), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX brand_id_idx (brand_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product_category_link (id BIGINT AUTO_INCREMENT, product_id BIGINT NOT NULL, category_id BIGINT NOT NULL, INDEX product_id_idx (product_id), INDEX category_id_idx (category_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product_color_link (id BIGINT AUTO_INCREMENT, product_id BIGINT NOT NULL, color_id BIGINT NOT NULL, INDEX product_id_idx (product_id), INDEX color_id_idx (color_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product_material_link (id BIGINT AUTO_INCREMENT, product_id BIGINT NOT NULL, material_id BIGINT NOT NULL, INDEX product_id_idx (product_id), INDEX material_id_idx (material_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product_similarity (id BIGINT AUTO_INCREMENT, id1 BIGINT NOT NULL, id2 BIGINT NOT NULL, similarity FLOAT(18, 2) NOT NULL, INDEX id1_idx (id1), INDEX id2_idx (id2), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE q_q_user (id BIGINT AUTO_INCREMENT, name TEXT NOT NULL, user_id BIGINT NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE ren_ren_user (id BIGINT AUTO_INCREMENT, name TEXT NOT NULL, sex TEXT, networkname TEXT, friendscount BIGINT, birthyear BIGINT, birthmonth BIGINT, birthday BIGINT, headurl TEXT, hometownprovince TEXT, hometowncity TEXT, user_id BIGINT NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE sale (id BIGINT AUTO_INCREMENT, product_id BIGINT NOT NULL, store_id BIGINT NOT NULL, salediscount FLOAT(18, 2) NOT NULL, salestarttime DATETIME NOT NULL, saleendtime DATETIME NOT NULL, salecoupon TEXT, INDEX product_id_idx (product_id), INDEX store_id_idx (store_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE store (id BIGINT AUTO_INCREMENT, name TEXT NOT NULL, longitude FLOAT(18, 2), latitude FLOAT(18, 2), address TEXT, rating FLOAT(18, 2), operatetime TEXT, contactphone TEXT, contactemail TEXT, contactwebsite TEXT, parking BIGINT, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE user (id BIGINT AUTO_INCREMENT, username VARCHAR(16), password VARCHAR(32), usertype TEXT, realname VARCHAR(8), sex TEXT, age BIGINT, headurl TEXT, lastlogin DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX username_index_idx (username), INDEX password_index_idx (password), INDEX realname_index_idx (realname), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE user_product_recommendation_link (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, product_id BIGINT NOT NULL, INDEX user_id_idx (user_id), INDEX product_id_idx (product_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE user_product_upload_link (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, product_id BIGINT NOT NULL, INDEX user_id_idx (user_id), INDEX product_id_idx (product_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
ALTER TABLE category_tree ADD CONSTRAINT category_tree_subcategory_id_category_id FOREIGN KEY (subcategory_id) REFERENCES category(id) ON DELETE CASCADE;
ALTER TABLE category_tree ADD CONSTRAINT category_tree_category_id_category_id FOREIGN KEY (category_id) REFERENCES category(id) ON DELETE CASCADE;
ALTER TABLE comment ADD CONSTRAINT comment_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id) ON DELETE CASCADE;
ALTER TABLE comment ADD CONSTRAINT comment_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE friend_similarity ADD CONSTRAINT friend_similarity_id2_user_id FOREIGN KEY (id2) REFERENCES user(id) ON DELETE CASCADE;
ALTER TABLE friend_similarity ADD CONSTRAINT friend_similarity_id1_user_id FOREIGN KEY (id1) REFERENCES user(id) ON DELETE CASCADE;
ALTER TABLE friendship ADD CONSTRAINT friendship_id2_user_id FOREIGN KEY (id2) REFERENCES user(id) ON DELETE CASCADE;
ALTER TABLE friendship ADD CONSTRAINT friendship_id1_user_id FOREIGN KEY (id1) REFERENCES user(id) ON DELETE CASCADE;
ALTER TABLE image ADD CONSTRAINT image_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE price ADD CONSTRAINT price_store_id_store_id FOREIGN KEY (store_id) REFERENCES store(id) ON DELETE CASCADE;
ALTER TABLE price ADD CONSTRAINT price_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE product ADD CONSTRAINT product_brand_id_brand_id FOREIGN KEY (brand_id) REFERENCES brand(id) ON DELETE CASCADE;
ALTER TABLE product_category_link ADD CONSTRAINT product_category_link_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE product_category_link ADD CONSTRAINT product_category_link_category_id_category_id FOREIGN KEY (category_id) REFERENCES category(id) ON DELETE CASCADE;
ALTER TABLE product_color_link ADD CONSTRAINT product_color_link_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE product_color_link ADD CONSTRAINT product_color_link_color_id_color_id FOREIGN KEY (color_id) REFERENCES color(id) ON DELETE CASCADE;
ALTER TABLE product_material_link ADD CONSTRAINT product_material_link_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE product_material_link ADD CONSTRAINT product_material_link_material_id_material_id FOREIGN KEY (material_id) REFERENCES material(id) ON DELETE CASCADE;
ALTER TABLE product_similarity ADD CONSTRAINT product_similarity_id2_product_id FOREIGN KEY (id2) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE product_similarity ADD CONSTRAINT product_similarity_id1_product_id FOREIGN KEY (id1) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE q_q_user ADD CONSTRAINT q_q_user_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id) ON DELETE CASCADE;
ALTER TABLE ren_ren_user ADD CONSTRAINT ren_ren_user_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id) ON DELETE CASCADE;
ALTER TABLE sale ADD CONSTRAINT sale_store_id_store_id FOREIGN KEY (store_id) REFERENCES store(id) ON DELETE CASCADE;
ALTER TABLE sale ADD CONSTRAINT sale_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE user_product_recommendation_link ADD CONSTRAINT user_product_recommendation_link_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id) ON DELETE CASCADE;
ALTER TABLE user_product_recommendation_link ADD CONSTRAINT user_product_recommendation_link_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE user_product_upload_link ADD CONSTRAINT user_product_upload_link_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id) ON DELETE CASCADE;
ALTER TABLE user_product_upload_link ADD CONSTRAINT user_product_upload_link_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE;
